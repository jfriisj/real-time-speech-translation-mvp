# Release v0.4.0 - Voice Activity Detection (VAD)

## Plan Reference
- [Plan 009 Voice Activity Detection (VAD) Plan](agent-output/planning/009-voice-activity-detection-plan.md)

## Release Date
- 2026-01-25

## Release Summary
- **Version**: v0.4.0
- **Release Type**: Performance/efficiency release (Voice Activity Detection stage)
- **Environment**: Local Docker Compose stack (Gateway, VAD, ASR, Translation, Kafka, Schema Registry)
- **Epic Alignment**: Epic 1.6 Voice Activity Detection Service
- **Key Deliverables**:
  - Introduced the SpeechSegmentEvent contract with `segment_index` metadata to preserve ordering per `correlation_id`.
  - Added the Silero-ONNX VAD service that filters silence before ASR, keys events by `correlation_id`, and produces speech segments.
  - Updated ASR to dual-mode input (AudioInputEvent or SpeechSegmentEvent) and wired the new stage into docker compose.
  - Validated the success metric: 72.9% reduction in processed audio duration while keeping $\\Delta \\text{WER}=0.0$, confirming the efficiency/quality guardrail.

## Pre-Release Verification

### UAT / QA
- [x] QA Report: agent-output/qa/009-voice-activity-detection-qa.md (QA Complete; unit, integration, coverage, and success-metric runs passed; compose stack rebuilt and smoke tests executed).
- [x] UAT Report: agent-output/uat/009-voice-activity-detection-uat.md (UAT Complete; business value plus duration-reduction and WER guardrail verified; APPROVED FOR RELEASE).

### Version Consistency
- [x] Plan 009 explicitly targets v0.4.0 and the Epic 1.6 scope recorded on the roadmap.
- [x] [services/vad/pyproject.toml](services/vad/pyproject.toml) pins version 0.4.0 and [services/vad/CHANGELOG.md](services/vad/CHANGELOG.md) logs the same release.
- [x] Roadmap entry for release v0.4.0 (Epic 1.6) in [agent-output/roadmap/product-roadmap.md](agent-output/roadmap/product-roadmap.md) stays aligned with this delivery.

### Packaging Integrity
- [x] Container build: `docker compose build vad-service` succeeded after correcting the service target name.
- [x] Compose stack deployed for testing: `docker compose up -d --build vad-service asr-service translation-service` alongside Kafka/Schema Registry so integration/e2e scripts targeted the live services.
- [x] End-to-end validation: tests/e2e/vad_pipeline_smoke.py, tests/e2e/legacy_pipeline_smoke.py, and the vad_success_metric scripts produced the reduction and WER artifacts referenced in QA.

### Git Remote
- [x] `git remote -v` confirms `origin` is https://github.com/jfriisj/real-time-speech-translation-mvp.git for fetch and push.

### Gitignore Review
- [x] Reviewed .gitignore for large/untracked artifacts that would affect packaging; no adjustments required for this release.

### Workspace Cleanliness
- [x] `git status -sb` showed only QA/UAT artifacts modified before the release doc was added; once this doc is committed the tree is clean.

### User Confirmation
- **Presentation**: VAD now filters ~85% of audio with no WER regression ($\\Delta \\text{WER}=0.0$), QA/UAT reports link the smoke tests and success-metric artifacts, and containers can be rebuilt via docker compose.
- **User Response**: yes
- **Timestamp**: 2026-01-25 08:06:44 UTC
- **Notes**: Approval received; tagging and distribution steps were executed next.

## Release Execution

### Git Tagging
- Command executed: `git tag -a v0.4.0 -m "Release v0.4.0"`
- Status: Completed locally and pushed to origin once the release commit was created (`git push origin iteration-2` + `git push origin v0.4.0`).

### Package Publication
- Registry/command: TBD (no automated registry release configured; to be created if needed post-release).
- Status: Not run for this iteration.

### Publication Verification
- Checklist: Pending (no GitHub release or container registry push was created as part of this exercise).

## Post-Release Status
- **Status**: Deployment Complete (tag + commit are available on origin; manual artifact publication remains optional).
- **Known Issues**: Multi-partition ordering validation remains blocked by the single-node Kafka broker (documented in QA/UAT artifacts).
- **Rollback Plan**: Revert the v0.4.0 tag and roll back to v0.3.0 artifacts if verification surfaces regressions.

## Release History Entry
```
{
  "version": "v0.4.0",
  "date": "2026-01-25",
  "status": "released",
  "notes": "VAD reduces ASR workload (~85% duration reduction) with no quality regression (WER delta=0.0); release executed after explicit approval and tagging.",
  "user_confirmation": "yes (2026-01-25 08:06:44 UTC)"
}
```

## Next Actions
1. Publish any remaining release artifacts (GitHub release metadata, container registry uploads) and record their URLs.
2. Track the ordering-validation limitation on the backlog so multi-partition Kafka coverage can be added later.
3. Close this release by handing off to retrospectives and the reviewer backlog once artifact publication is confirmed.
